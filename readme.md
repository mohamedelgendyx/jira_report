# Jira Logged Hours Report

> **Note:** This project relies on logged hours. It fetches tickets based on the hours logged during the specified date range, not on ticket creation or update dates.

---

## Project Purpose & Prompt

This project was created to generate comprehensive Jira time tracking reports by connecting to the Jira REST API. The requirements and design were based on the following prompt:

> **Prompt Summary:**
>
> Create a Python script that generates comprehensive Jira time tracking reports by connecting to the Jira REST API. The script should:
>
> **Core Requirements:**
> - Use Jira REST API with basic authentication (email + API token)
> - Allow configuration through a separate config file (`jira_config.py`)
> - Generate reports for a specified date range and project(s)
> - Compare actual time logged vs original estimates
>
> **Report Sections Needed:**
> 1. **Team Member Summary** - Show each person's total hours logged, number of tickets worked, with estimated vs actual time comparison and variance
> 2. **Ticket-by-Ticket Analysis** - List all tickets with original estimates, actual time spent, and variance
> 3. **Individual Breakdowns** - For each team member, show which tickets they worked on with estimates vs actuals
> 4. **Ticket Breakdowns** - For each ticket, show which team members worked on it and their time distribution
>
> **Technical Features:**
> - Fetch issues using JQL queries filtered by worklog date ranges
> - Process all worklogs within the specified date period
> - Handle pagination for large result sets
> - Support multiple projects or all projects
> - Save reports to timestamped text files
> - Include summary statistics like estimation accuracy percentages
> - Format time in both hours and days
> - Handle timezone-aware date parsing
>
> **Output Format:**
> - Well-formatted text tables with clear headers and separators
> - Include totals, averages, and accuracy metrics
> - Save to organized directory structure with descriptive filenames
>
> The script should be production-ready with proper error handling, progress indicators, and configuration validation.

---

## Features
- Fetches worklogs from Jira Cloud using REST API
- Summarizes hours logged by user and by ticket
- Compares actual hours to original estimates
- Outputs a detailed report to the console and optionally to a file

## Prerequisites
- Python 3.7+
- Access to a Jira Cloud instance
- A Jira API token ([create one here](https://id.atlassian.com/manage-profile/security/api-tokens))
- Your Jira email address

## Setup
1. **Clone the repository or copy the project files.**

2. **Install dependencies:**
   
   This script uses the `requests` library. Install it if you don't have it:
   ```sh
   pip install requests
   ```

3. **Configure Jira credentials and report settings:**
   
   - Copy `jira_config.sample.py` to `jira_config.py`:
     ```sh
     cp jira_config.sample.py jira_config.py
     ```
   - Open `jira_config.py` and fill in:
     - `JIRA_URL`: Your Jira instance URL (e.g., `https://your-domain.atlassian.net`)
     - `JIRA_EMAIL`: Your Jira email address
     - `JIRA_API_TOKEN`: Your Jira API token
     - Optionally, set `PROJECT_KEYS` to filter by project(s)
     - Adjust file output options if needed

   **Note:** `jira_config.py` is ignored by version control. Do not share your credentials.

4. **(Optional) Create the reports directory:**
   The script will create the `reports/` directory automatically if it does not exist.

## Running the Report

Run the script from the project directory:

```sh
python logged_hours.py --from-date <FROM_DATE> --to-date <TO_DATE> --participants <PARTICIPANTS ...>
```
Example:
```sh
python logged_hours.py --from-date "25 May 2025" --to-date "15 Jun 2025" --participants "Alice Smith (Available for 40h)" "Bob Johnson (Available for 40h)" ...
```

Or

```sh
python logged_hours.py --args-file PATH_TO_ARGS_FILE
```
Args file format:
```sh
From: 25 May
To: 15 June
Participant Names:
Alice Smith (Available for 80h)
Bob Johnson (Available for 40h)
...
```

- The report will be printed to the console.
- If `SAVE_REPORT_TO_FILE` is set to `True` in your config, the report will be saved in the `reports/` directory.

## Example Output

Below is a sample of the report generated by this script:

```
================================================================================
ACTUALS vs ESTIMATES BY TEAM MEMBER
================================================================================
Team Member                    Est Hours       Act Hours       Variance        Tickets   
--------------------------------------------------------------------------------
Alice Smith                    40.0h (5.0d)    42.5h (5.3d)    +2.5h           8        
Bob Johnson                    35.0h (4.4d)    30.0h (3.8d)    -5.0h           6        
Charlie Lee                    20.0h (2.5d)    25.0h (3.1d)    +5.0h           4        
--------------------------------------------------------------------------------
TOTAL                          95.0h (11.9d)   97.5h (12.2d)   +2.5h           18       

Team Members: 3
Average Estimated Hours per Person: 31.7h (4.0d)
Average Actual Hours per Person: 32.5h (4.1d)
Overall Estimation Accuracy: 97.4%

======================================================================
ACTUALS vs ESTIMATES BY TICKET
======================================================================
Ticket       Summary                             Original Est Actual       Variance    
----------------------------------------------------------------------
PRJ-101      Implement login feature             16.0h (2.0d)  18.0h (2.3d) +2.0h      
PRJ-102      Create user dashboard               24.0h (3.0d)  22.0h (2.8d) -2.0h      
PRJ-103      Fix bug in notifications           8.0h (1.0d)   10.0h (1.3d)  +2.0h      
PRJ-104      Update API endpoints                12.0h (1.5d)  12.5h (1.6d) +0.5h      
----------------------------------------------------------------------
TOTALS                                           60.0h (7.5d)   63.0h (7.9d) +3.0h (0.4d)

Estimation Accuracy: 95.0%
Tickets with Estimates: 4/4

==========================================================================================
BREAKDOWN OF ACTUALS BY TEAM MEMBER ACROSS STORIES
==========================================================================================

Alice Smith - Estimated: 40.0h (5.0d) | Actual: 42.5h (5.3d)
----------------------------------------------------------------------
Ticket       Estimated    Actual       Summary                       
----------------------------------------------------------------------
PRJ-101      16.0h (2.0d) 18.0h (2.3d) Implement login feature
PRJ-104      12.0h (1.5d) 12.5h (1.6d) Update API endpoints
PRJ-103      8.0h (1.0d)  10.0h (1.3d) Fix bug in notifications
PRJ-102      4.0h (0.5d)  2.0h (0.3d)  Create user dashboard

Bob Johnson - Estimated: 35.0h (4.4d) | Actual: 30.0h (3.8d)
----------------------------------------------------------------------
Ticket       Estimated    Actual       Summary                       
----------------------------------------------------------------------
PRJ-102      20.0h (2.5d) 18.0h (2.3d) Create user dashboard
PRJ-101      10.0h (1.3d) 9.0h (1.1d)  Implement login feature
PRJ-104      5.0h (0.6d)  3.0h (0.4d)  Update API endpoints

Charlie Lee - Estimated: 20.0h (2.5d) | Actual: 25.0h (3.1d)
----------------------------------------------------------------------
Ticket       Estimated    Actual       Summary                       
----------------------------------------------------------------------
PRJ-103      8.0h (1.0d)  10.0h (1.3d) Fix bug in notifications
PRJ-104      3.0h (0.4d)  7.0h (0.9d)  Update API endpoints
PRJ-101      9.0h (1.1d)  8.0h (1.0d)  Implement login feature

==========================================================================================
BREAKDOWN OF ACTUALS BY TICKET ACROSS TEAM MEMBERS
==========================================================================================

PRJ-101
----------------------------------------------------------------------
User           Hours
--------------------
Alice Smith    18.0h (2.3d)
Bob Johnson    9.0h (1.1d)
Charlie Lee    8.0h (1.0d)

PRJ-102
----------------------------------------------------------------------
User           Hours
--------------------
Bob Johnson    18.0h (2.3d)
Alice Smith    2.0h (0.3d)

PRJ-103
----------------------------------------------------------------------
User           Hours
--------------------
Alice Smith    10.0h (1.3d)
Charlie Lee    10.0h (1.3d)

PRJ-104
----------------------------------------------------------------------
User           Hours
--------------------
Alice Smith    12.5h (1.6d)
Bob Johnson    3.0h (0.4d)
Charlie Lee    7.0h (0.9d)
```

## Troubleshooting
- Ensure your Jira credentials and API token are correct.
- Make sure your Jira user has permission to view worklogs and issues in the selected projects.
- Dates must be in ISO 8601 format (e.g., `2025-05-15T00:00:00+00:00`).
- If you see errors about missing configuration, check that `jira_config.py` exists and is filled in.

## Security
- Never commit your `jira_config.py` with credentials to version control.
- Your API token is sensitiveâ€”treat it like a password.

## License
This project is for internal use. Adapt as needed for your organization.
